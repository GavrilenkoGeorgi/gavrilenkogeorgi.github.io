(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["priceEditor"],{"11e9":function(e,t,n){var i=n("52a7"),o=n("4630"),r=n("6821"),a=n("6a99"),c=n("69a8"),l=n("c69a"),s=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?s:function(e,t){if(e=r(e),t=a(t,!0),l)try{return s(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"37c8":function(e,t,n){t.f=n("2b4c")},"3a72":function(e,t,n){var i=n("7726"),o=n("8378"),r=n("2d00"),a=n("37c8"),c=n("86cc").f;e.exports=function(e){var t=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||c(t,e,{value:a.f(e)})}},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"67ab":function(e,t,n){var i=n("ca5a")("meta"),o=n("d3f4"),r=n("69a8"),a=n("86cc").f,c=0,l=Object.isExtensible||function(){return!0},s=!n("79e5")(function(){return l(Object.preventExtensions({}))}),g=function(e){a(e,i,{value:{i:"O"+ ++c,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,i)){if(!l(e))return"F";if(!t)return"E";g(e)}return e[i].i},u=function(e,t){if(!r(e,i)){if(!l(e))return!0;if(!t)return!1;g(e)}return e[i].w},f=function(e){return s&&h.NEED&&l(e)&&!r(e,i)&&g(e),e},h=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:u,onFreeze:f}},"7bbc":function(e,t,n){var i=n("6821"),o=n("9093").f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==r.call(e)?c(e):o(i(e))}},"8a81":function(e,t,n){"use strict";var i=n("7726"),o=n("69a8"),r=n("9e1e"),a=n("5ca1"),c=n("2aba"),l=n("67ab").KEY,s=n("79e5"),g=n("5537"),d=n("7f20"),u=n("ca5a"),f=n("2b4c"),h=n("37c8"),m=n("3a72"),v=n("d4c0"),p=n("1169"),b=n("cb7c"),D=n("d3f4"),y=n("6821"),S=n("6a99"),C=n("4630"),x=n("2aeb"),I=n("7bbc"),w=n("11e9"),P=n("86cc"),L=n("0d58"),F=w.f,_=P.f,R=I.f,O=i.Symbol,V=i.JSON,E=V&&V.stringify,k="prototype",T=f("_hidden"),A=f("toPrimitive"),N={}.propertyIsEnumerable,B=g("symbol-registry"),$=g("symbols"),j=g("op-symbols"),M=Object[k],H="function"==typeof O,G=i.QObject,J=!G||!G[k]||!G[k].findChild,W=r&&s(function(){return 7!=x(_({},"a",{get:function(){return _(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=F(M,t);i&&delete M[t],_(e,t,n),i&&e!==M&&_(M,t,i)}:_,U=function(e){var t=$[e]=x(O[k]);return t._k=e,t},K=H&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},q=function(e,t,n){return e===M&&q(j,t,n),b(e),t=S(t,!0),b(n),o($,t)?(n.enumerable?(o(e,T)&&e[T][t]&&(e[T][t]=!1),n=x(n,{enumerable:C(0,!1)})):(o(e,T)||_(e,T,C(1,{})),e[T][t]=!0),W(e,t,n)):_(e,t,n)},Y=function(e,t){b(e);var n,i=v(t=y(t)),o=0,r=i.length;while(r>o)q(e,n=i[o++],t[n]);return e},z=function(e,t){return void 0===t?x(e):Y(x(e),t)},Q=function(e){var t=N.call(this,e=S(e,!0));return!(this===M&&o($,e)&&!o(j,e))&&(!(t||!o(this,e)||!o($,e)||o(this,T)&&this[T][e])||t)},X=function(e,t){if(e=y(e),t=S(t,!0),e!==M||!o($,t)||o(j,t)){var n=F(e,t);return!n||!o($,t)||o(e,T)&&e[T][t]||(n.enumerable=!0),n}},Z=function(e){var t,n=R(y(e)),i=[],r=0;while(n.length>r)o($,t=n[r++])||t==T||t==l||i.push(t);return i},ee=function(e){var t,n=e===M,i=R(n?j:y(e)),r=[],a=0;while(i.length>a)!o($,t=i[a++])||n&&!o(M,t)||r.push($[t]);return r};H||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=u(arguments.length>0?arguments[0]:void 0),t=function(n){this===M&&t.call(j,n),o(this,T)&&o(this[T],e)&&(this[T][e]=!1),W(this,e,C(1,n))};return r&&J&&W(M,e,{configurable:!0,set:t}),U(e)},c(O[k],"toString",function(){return this._k}),w.f=X,P.f=q,n("9093").f=I.f=Z,n("52a7").f=Q,n("2621").f=ee,r&&!n("2d00")&&c(M,"propertyIsEnumerable",Q,!0),h.f=function(e){return U(f(e))}),a(a.G+a.W+a.F*!H,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var ie=L(f.store),oe=0;ie.length>oe;)m(ie[oe++]);a(a.S+a.F*!H,"Symbol",{for:function(e){return o(B,e+="")?B[e]:B[e]=O(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){J=!0},useSimple:function(){J=!1}}),a(a.S+a.F*!H,"Object",{create:z,defineProperty:q,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),V&&a(a.S+a.F*(!H||s(function(){var e=O();return"[null]"!=E([e])||"{}"!=E({a:e})||"{}"!=E(Object(e))})),"JSON",{stringify:function(e){var t,n,i=[e],o=1;while(arguments.length>o)i.push(arguments[o++]);if(n=t=i[1],(D(t)||void 0!==e)&&!K(e))return p(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),i[1]=t,E.apply(V,i)}}),O[k][A]||n("32e9")(O[k],A,O[k].valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},9093:function(e,t,n){var i=n("ce10"),o=n("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},ac4d:function(e,t,n){n("3a72")("asyncIterator")},ac6a:function(e,t,n){for(var i=n("cadf"),o=n("0d58"),r=n("2aba"),a=n("7726"),c=n("32e9"),l=n("84f2"),s=n("2b4c"),g=s("iterator"),d=s("toStringTag"),u=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(f),m=0;m<h.length;m++){var v,p=h[m],b=f[p],D=a[p],y=D&&D.prototype;if(y&&(y[g]||c(y,g,u),y[d]||c(y,d,p),l[p]=u,b))for(v in i)y[v]||r(y,v,i[v],!0)}},ac79:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return this.getUserState.isAuthenticated?n("v-container",{attrs:{"fill-height":"",fluid:"","pa-0":""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("h1",{staticClass:"py-2"},[e._v(e._s(e.header))]),e._l(this.getPriceItemsCollectionToLoad,function(t,i){return n("v-expansion-panel",{key:i},[n("v-expansion-panel-content",[n("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e._v("\r\n              "+e._s(t.humanReadableTitle)+"\r\n            ")]),n("v-card",[n("v-card-text",{staticClass:"blue-grey--text"},[e._v("\r\n                "+e._s(e.helpMessage)+"\r\n                ")]),e._l(e.getAllPrices[i],function(o){return n("v-flex",{key:o.id,attrs:{xs12:""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{staticClass:"text-xs-left",attrs:{xs12:"","pl-2":""}},[n("v-layout",[n("v-flex",{staticClass:"py-4 pl-2",attrs:{xs5:"","d-flex":"","align-center":""}},[n("h4",{staticClass:"orange--text subheading"},[e._v("\r\n                              "+e._s(o.header)+"\r\n                            ")])]),n("v-flex",{staticClass:"text-xs-right py-4 pr-1",attrs:{xs7:""}},[n("v-btn",{attrs:{icon:"",small:""},on:{click:function(n){e.handleRenameCategory(o.id,o.header,t.collectionName,i)}}},[n("v-icon",{attrs:{color:"green"}},[e._v("create")])],1),n("v-btn",{attrs:{icon:"",small:""},on:{click:function(n){e.movePriceCategory("up",o.id,t.collectionName,i)}}},[n("v-icon",{attrs:{color:"blue darken-1"}},[e._v("arrow_upward")])],1),n("v-btn",{attrs:{icon:"",small:""},on:{click:function(n){e.movePriceCategory("down",o.id,t.collectionName,i)}}},[n("v-icon",{attrs:{color:"blue darken-1"}},[e._v("arrow_downward")])],1),n("v-btn",{attrs:{icon:"",small:""},on:{click:function(n){e.handleDeleteCategory(o.id,o.header,t.collectionName,i)}}},[n("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1)],1)],1)],1),e._l(o.services,function(r,a){return n("v-flex",{key:a,attrs:{xs12:""}},[n("v-layout",{attrs:{row:"","align-center":""}},[n("v-flex",{staticClass:"text-xs-right"},[n("v-btn",{attrs:{icon:"",small:"",fab:""},on:{click:function(n){e.handleRenameSingleStringPriceItem(o.id,r,t.collectionName,i,a)}}},[n("v-icon",{attrs:{small:"",color:"green"}},[e._v("create")])],1)],1),n("v-flex",{staticClass:"body-2",attrs:{xs9:""}},[e._v("\r\n                            "+e._s(r)+"\r\n                          ")]),n("v-flex",{staticClass:"text-xs-right",attrs:{xs2:""}},[n("v-btn",{attrs:{icon:"",small:"",fab:""},on:{click:function(n){e.handleDeletePriceString(o.id,r,t.collectionName,i)}}},[n("v-icon",{attrs:{small:"",color:"red"}},[e._v("delete")])],1)],1)],1)],1)}),n("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[n("v-btn",{attrs:{flat:"",outline:"",color:"green"},on:{click:function(n){e.handleAddSingleStringPriceItem(o.id,t.collectionName,i)}}},[n("v-icon",{attrs:{medium:"",color:"orange"}},[e._v("add")]),e._v("\r\n                            Додаті\r\n                        ")],1)],1)],2)],1)}),n("v-layout",[n("v-flex",{attrs:{"align-center":"","d-flex":"","py-4":""}},[n("v-btn",{attrs:{flat:"",outline:"",color:"orange"},on:{click:function(n){e.handleAddCategory(i,t.collectionName)}}},[e._v("\r\n                        додати категорію\r\n                      ")])],1)],1)],2)],1)],1)})],2),n("v-flex",{staticClass:"text-xs-center"},[n("v-dialog",{attrs:{width:"500"},on:{input:function(t){e.genericDialog=t}},model:{value:e.genericDialog,callback:function(t){e.genericDialog=t},expression:"genericDialog"}},[n("v-card",[n("v-card-title",{class:{"blue darken-1":e.genericDialogData.renameString||e.genericDialogData.addString||e.genericDialogData.addCategory||e.genericDialogData.renameCategory,red:e.genericDialogData.delete||e.genericDialogData.deleteCategory}},[n("h4",{staticClass:"white--text subheading"},[e._v("\r\n                "+e._s(e.genericDialogData.title)+"\r\n              ")])]),n("v-card-text",[e.genericDialogData.delete||e.genericDialogData.deleteCategory?n("v-flex",{staticClass:"text-xs-left"},[e._v("\r\n                "+e._s(e.genericDialogData.inputFieldLabel)+"\r\n              ")]):e._e(),e.genericDialogData.renameString||e.genericDialogData.addString||e.genericDialogData.addCategory||e.genericDialogData.renameCategory?n("v-form",{ref:"generic-edit-input",model:{value:e.priceEditingFormValid,callback:function(t){e.priceEditingFormValid=t},expression:"priceEditingFormValid"}},[n("v-text-field",{attrs:{rules:e.priceStringRules,type:"text",autocomplete:"off",required:"","append-icon":"create",label:e.genericDialogData.inputFieldLabel},model:{value:e.genericDialogData.inputFieldValue,callback:function(t){e.$set(e.genericDialogData,"inputFieldValue",t)},expression:"genericDialogData.inputFieldValue"}})],1):e._e()],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue",outline:"",flat:""},on:{click:e.cancelAction}},[e._v("\r\n                скасувати\r\n              ")]),e.genericDialogData.renameCategory?n("v-btn",{attrs:{loading:e.buttonLoadingState,disabled:e.buttonLoadingState,color:"orange",outline:"",flat:""},on:{click:e.handleRenameCategory}},[e._v("\r\n                перейменувати\r\n              ")]):e._e(),e.genericDialogData.addCategory?n("v-btn",{attrs:{loading:e.buttonLoadingState,disabled:e.buttonLoadingState,color:"orange",outline:"",flat:""},on:{click:e.handleAddCategory}},[e._v("\r\n                додати\r\n              ")]):e._e(),e.genericDialogData.deleteCategory?n("v-btn",{attrs:{loading:e.buttonLoadingState,disabled:e.buttonLoadingState,color:"red",outline:"",flat:""},on:{click:e.handleDeleteCategory}},[e._v("\r\n                видалити\r\n              ")]):e._e(),e.genericDialogData.delete?n("v-btn",{attrs:{loading:e.buttonLoadingState,disabled:e.buttonLoadingState,color:"red",outline:"",flat:""},on:{click:e.handleDeletePriceString}},[e._v("\r\n                видалити\r\n              ")]):e._e(),e.genericDialogData.addString?n("v-btn",{attrs:{loading:e.buttonLoadingState,disabled:e.buttonLoadingState,color:"orange",outline:"",flat:""},on:{click:e.handleAddSingleStringPriceItem}},[e._v("\r\n                зберегти\r\n              ")]):e._e(),e.genericDialogData.renameString?n("v-btn",{attrs:{loading:e.buttonLoadingState,disabled:e.buttonLoadingState,color:"orange",outline:"",flat:""},on:{click:e.handleRenameSingleStringPriceItem}},[e._v("\r\n                перейменувати\r\n              ")]):e._e()],1)],1)],1)],1)],1)],1):e._e()},o=[],r=(n("55dd"),n("7f7f"),n("ac4d"),n("8a81"),n("ac6a"),n("c93e")),a=(n("cadf"),n("551c"),n("097d"),n("2f62")),c=n("59ca"),l=n.n(c),s=n("deef"),g={data:function(){return{header:"Редактор цін",helpMessage:"Двокрапка відокремлює\n      назву послуги від ціни,\n      потрібно для правильного\n      відображення цін на сайті.",allPrices:[],buttonLoadingState:!1,genericDialog:!1,genericDialogData:{renameString:!1,renameCategory:!1,deleteCategory:!1,addCategory:!1,delete:!1,addString:!1,title:"",id:null,inputFieldValue:"",inputFieldLabel:"",itemToRenameIndex:""},buffer:{docHeader:"",priceValue:"",valueForLabel:"",header:"",docID:null,collectionRef:null,collectionIndex:null,currentServiceItemOrder:null},editingChoices:[{choiceName:"Ціни"},{choiceName:"Коментарі"}],priceEditingFormValid:!1,priceStringRules:[function(e){return!!e||"Необхідно ввести назву та ціну"},function(e){return e&&e.length<=70||"Позиція повинна бути менше 70 символів"}],reviewsItemsRef:s["a"].collection("reviews"),reviewsItemsFromDB:[]}},computed:Object(r["a"])({},Object(a["b"])(["getUserState","getAllPrices","getItemsWhichOrderHasChanged","getPriceItemsCollectionToLoad","getUpdatedArray","getCollectionLengthPlusOne"])),mounted:function(){var e=this;this.$nextTick(function(){e.loadAllPrices()})},methods:{loadAllPrices:function(){var e=this,t=!0,n=!1,i=void 0;try{for(var o,r=function(){var t=o.value,n=[];s["a"].collection("".concat(t.collectionName)).get().then(function(t){t.forEach(function(e){n.push({id:e.id,order:e.data().order,header:e.data().header,services:e.data().services})});var i=e.sortItemsArray(n);e.allPrices.push(i),e.$store.commit("setPrices",i)}).catch(function(e){console.log("Error getting documents: ",e)})},a=this.getPriceItemsCollectionToLoad[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)r()}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}},handleRenameCategory:function(e,t,n,i){var o=this;if(this.genericDialog)this.priceEditingFormValid?(console.log("Renaming single price string"),this.renameCategoryInStore().then(function(){console.log("Syncing in firestore"),o.renameCategoryInDB(o.genericDialogData.id,o.buffer.collectionRef,o.genericDialogData.inputFieldValue)}).then(function(){o.genericDialog=!1}).catch(function(e){console.log("Error is ".concat(e))})):console.log("Check input");else{var r={renameString:!1,renameCategory:!0,deleteCategory:!1,addCategory:!1,delete:!1,addString:!1,title:"Перейменувати категорію",id:e,inputFieldValue:t,inputFieldLabel:t,itemToRenameIndex:null};this.buffer.collectionIndex=i,this.buffer.collectionRef=n,this.genericDialogData=r,this.genericDialog=!0}},renameCategoryInStore:function(){var e=this;return new Promise(function(t){var n={id:e.genericDialogData.id,collectionIndex:e.buffer.collectionIndex,inputFieldValue:e.genericDialogData.inputFieldValue};e.$store.commit("renamePriceCategory",n),t()})},renameCategoryInDB:function(e,t,n){console.log("Renaming category in DB"),s["a"].collection("".concat(t)).doc(e).update({header:n})},movePriceCategory:function(e,t,n,i){var o=this,r={id:t,direction:e,collectionIndex:i};this.changePriceCategoryOrderInStore(r).then(function(){o.$store.commit("sortItemsArrayInStore",i)}).then(function(){console.log("Syncing in firestore"),o.syncOrderOfCategoriesInDB(n)}).catch(function(e){console.log("Error is ".concat(e))})},changePriceCategoryOrderInStore:function(e){var t=this;return new Promise(function(n){t.$store.commit("changePriceItemsOrder",e),n()})},syncOrderOfCategoriesInDB:function(e){console.log("Syncing order of prices in db. Index ".concat(e)),console.log(this.getItemsWhichOrderHasChanged);var t=!0,n=!1,i=void 0;try{for(var o,r=this.getItemsWhichOrderHasChanged[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;s["a"].collection("".concat(e)).doc(a.id).update({order:a.order}).then(function(){console.log("Document successfully written!")}).catch(function(e){console.error("Error writing document: ",e)})}}catch(e){n=!0,i=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}},handleDeleteCategory:function(e,t,n,i){var o=this;if(this.genericDialog)this.deleteCategoryFromStore().then(function(){console.log("Syncing with db.."),o.deleteCategoryFromDB(o.genericDialogData.id,o.buffer.collectionRef)}).catch(function(e){console.log("Error is ".concat(e))}),this.genericDialog=!this.genericDialog;else{var r={renameString:!1,renameCategory:!1,deleteCategory:!0,addCategory:!1,delete:!1,addString:!1,title:"Видалити категорію",id:e,inputFieldValue:null,inputFieldLabel:'Дійсно видалити: "'.concat(t,'"?'),itemToRenameIndex:null};this.buffer.collectionIndex=i,this.buffer.collectionRef=n,this.genericDialogData=r,this.genericDialog=!0}},deleteCategoryFromStore:function(){var e=this;return new Promise(function(t){var n={collectionIndex:e.buffer.collectionIndex,id:e.genericDialogData.id};e.$store.commit("deleteCategory",n),t()})},deleteCategoryFromDB:function(e,t){console.log("Deleting category from firestore"),s["a"].collection("".concat(t)).doc(e).delete().then(function(){console.log("Document successfully deleted!")}).catch(function(e){console.error("Error removing document: ",e)})},handleAddCategory:function(e,t){var n=this;if(console.log("Adding category dialog opens..."),this.genericDialog)this.priceEditingFormValid?(console.log("Adding category"),s["a"].collection("".concat(this.buffer.collectionRef)).add({header:this.genericDialogData.inputFieldValue,order:this.$store.getters.getCollectionLengthPlusOne(this.buffer.collectionIndex),services:[]}).then(function(e){console.log("Document successfully written! id is ".concat(e.id));var t={collectionIndex:n.buffer.collectionIndex,header:n.genericDialogData.inputFieldValue,order:n.$store.getters.getCollectionLengthPlusOne(n.buffer.collectionIndex),services:[],id:e.id};n.$store.commit("addCategory",t),n.genericDialog=!1}).catch(function(e){console.error("Error writing document: ",e)})):console.log("Check input.");else{var i={renameString:!1,renameCategory:!1,deleteCategory:!1,addCategory:!0,delete:!1,addString:!1,title:"Додати категорію",id:null,inputFieldValue:null,inputFieldLabel:"Введіть назву категорії",itemToRenameIndex:null};this.buffer.collectionIndex=e,this.buffer.collectionRef=t,this.genericDialogData=i,this.genericDialog=!0}},handleRenameSingleStringPriceItem:function(e,t,n,i,o){var r=this;if(this.genericDialog)this.priceEditingFormValid?(console.log("Renaming single price string"),this.renamePriceStringInStore().then(function(){var e=r.$store.getters.getUpdatedArray(r.buffer.collectionIndex,r.genericDialogData.id);r.renamePriceStringInDB(r.genericDialogData.id,r.buffer.collectionRef,e)}).then(function(){r.genericDialog=!1}).catch(function(e){console.log("Error is ".concat(e))})):console.log("Check input.");else{console.log("Preparing dialog for renaming single price string");var a={renameString:!0,renameCategory:!1,deleteCategory:!1,addCategory:!1,delete:!1,addString:!1,title:"Перейменувати позицію",id:e,inputFieldValue:t,inputFieldLabel:t,itemToRenameIndex:o};this.genericDialogData=a,this.genericDialog=!0,this.buffer.collectionRef=n,this.buffer.collectionIndex=i}},renamePriceStringInStore:function(){var e=this;return new Promise(function(t){var n={id:e.genericDialogData.id,collectionIndex:e.buffer.collectionIndex,inputFieldValue:e.genericDialogData.inputFieldValue,itemToRenameIndex:e.genericDialogData.itemToRenameIndex};e.$store.commit("renamePriceString",n),t()})},renamePriceStringInDB:function(e,t,n){console.log("Renaming in DB"),s["a"].collection("".concat(t)).doc(e).update({services:n})},handleAddSingleStringPriceItem:function(e,t,n){var i=this;if(this.genericDialog)this.priceEditingFormValid?(this.buttonLoadingState=!0,this.addPriceStringToStore().then(function(){i.addSingleStringPriceValueToDB(i.genericDialogData.id,i.genericDialogData.inputFieldValue,i.buffer.collectionRef),i.genericDialog=!1,i.buttonLoadingState=!1,console.log("All ok, closing dialog.")}).catch(function(e){return i.genericDialog=!0,i.buttonLoadingState=!1,console.log("Error is ".concat(e)),e})):console.log("Check input.");else{var o={renameString:!1,renameCategory:!1,deleteCategory:!1,addCategory:!1,delete:!1,addString:!0,title:"Додати цінову позицію",id:e,inputFieldValue:"",inputFieldLabel:"Введіть назву запису",itemToRenameIndex:""};this.genericDialogData=o,this.buffer.collectionRef=t,this.buffer.collectionIndex=n,this.buffer.docID=e,this.genericDialog=!0}},addPriceStringToStore:function(){var e=this;return new Promise(function(t){var n={id:e.genericDialogData.id,collectionName:e.buffer.collectionRef,collectionIndex:e.buffer.collectionIndex,stringValue:e.genericDialogData.inputFieldValue};e.$store.commit("addSingleStringPriceItem",n),t()})},addSingleStringPriceValueToDB:function(e,t,n){console.log("Adding to db"),s["a"].collection("".concat(n)).doc(e).update({services:l.a.firestore.FieldValue.arrayUnion(t)})},handleDeletePriceString:function(e,t,n,i){var o=this;if(this.genericDialog)this.deletePriceStringFromStore().then(function(){o.deleteSingleStringPriceValueFromDB(o.buffer.docID,o.buffer.priceValue,o.buffer.collectionRef)}).catch(function(e){console.log("Error is ".concat(e))}),this.genericDialog=!this.genericDialog;else{this.genericDialog=!0;var r={renameString:!1,renameCategory:!1,deleteCategory:!1,addCategory:!1,delete:!0,addString:!1,title:"Видалення",id:e,inputFieldValue:t,inputFieldLabel:'Дійсно видалити: "'.concat(t,'"?')};this.genericDialogData=r,this.buffer.docID=e,this.buffer.priceValue=t,this.buffer.collectionRef=n,this.buffer.collectionIndex=i}},deletePriceStringFromStore:function(){var e=this;return new Promise(function(t){var n={collectionIndex:e.buffer.collectionIndex,value:e.buffer.priceValue,id:e.buffer.docID};e.$store.commit("deleteSinglePriceString",n),t()})},deleteSingleStringPriceValueFromDB:function(e,t,n){console.log("Removing from db"),s["a"].collection("".concat(n)).doc(e).update({services:l.a.firestore.FieldValue.arrayRemove(t)})},approveComment:function(e){console.log("Setting 'approved' to comment with id: ".concat(e)),s["a"].collection("reviews").doc(e).update({approved:!0}),this.$store.commit("toggleReviewApproved",e)},disapproveComment:function(e){console.log("Setting 'disapproved' to comment with id: ".concat(e)),s["a"].collection("reviews").doc(e).update({approved:!1}),this.$store.commit("toggleReviewApproved",e)},loadReviews:function(){var e=this;console.log("Loading comments.."),this.reviewsItemsRef.get().then(function(t){return t.forEach(function(t){e.reviewsItemsFromDB.push({id:t.id,approved:t.data().approved,name:t.data().name,review:t.data().review,starsRating:t.data().starsRating})}),!0}).then(function(){e.$store.commit("setReviews",e.reviewsItemsFromDB)}).catch(function(e){console.log("Error getting documents: ",e)})},cancelAction:function(){this.genericDialog=!this.genericDialog},toggleButtonLoadingState:function(){console.log("Toggling button loading state."),this.buttonLoadingState=!this.buttonLoadingState},sortItemsArray:function(e){if(console.log("Sorting items array."),e)return e=e.sort(function(e,t){return e.order>t.order?1:t.order>e.order?-1:0}),e;console.log("Nothing to sort")}}},d=g,u=n("2877"),f=Object(u["a"])(d,i,o,!1,null,null,null);f.options.__file="PriceEditor.vue";t["default"]=f.exports},d4c0:function(e,t,n){var i=n("0d58"),o=n("2621"),r=n("52a7");e.exports=function(e){var t=i(e),n=o.f;if(n){var a,c=n(e),l=r.f,s=0;while(c.length>s)l.call(e,a=c[s++])&&t.push(a)}return t}}}]);
//# sourceMappingURL=priceEditor.d9f4b2c8.js.map